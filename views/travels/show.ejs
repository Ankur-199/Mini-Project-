<%- include('../partials/header') %>

<div class="mb-4">
    <a href="/travels" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Back to All Travels
    </a>
</div>

<% if (typeof error !== 'undefined') { %>
    <div class="alert alert-danger">
        <%= error %>
    </div>
<% } %>

<div class="card shadow">
    <div class="card-header bg-primary text-white">
        <h3 class="mb-0">
            <i class="bi bi-geo-alt-fill"></i> <%= travel.destination %>
        </h3>
    </div>
    <div class="card-body">
        <div class="row mb-3">
            <div class="col-md-6">
                <h5>Description</h5>
                <p><%= travel.description %></p>
            </div>
            <div class="col-md-6">
                <h5>Status</h5>
                <span class="badge bg-<%= 
                    travel.status === 'Planning' ? 'warning' : 
                    travel.status === 'Booked' ? 'info' : 
                    travel.status === 'In Progress' ? 'primary' : 
                    travel.status === 'Completed' ? 'success' : 
                    'secondary' 
                %> fs-6">
                    <%= travel.status %>
                </span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <h5><i class="bi bi-calendar-event"></i> Travel Dates</h5>
                <p>
                    <strong>Start:</strong> <%= new Date(travel.startDate).toLocaleDateString('en-US', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    }) %><br>
                    <strong>End:</strong> <%= new Date(travel.endDate).toLocaleDateString('en-US', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    }) %>
                </p>
            </div>
            <div class="col-md-6">
                <h5><i class="bi bi-info-circle"></i> Travel Details</h5>
                <p>
                    <strong>Travelers:</strong> <%= travel.travelers %><br>
                    <strong>Budget:</strong> $<%= travel.budget.toLocaleString() %>
                </p>
            </div>
        </div>

        <% if (travel.notes) { %>
            <div class="mb-3">
                <h5><i class="bi bi-sticky"></i> Notes</h5>
                <p class="text-muted"><%= travel.notes %></p>
            </div>
        <% } %>

        <div class="mt-4">
            <a href="/travels/<%= travel._id %>/edit" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Edit Travel
            </a>
            <form action="/travels/<%= travel._id %>?_method=DELETE" method="POST" class="d-inline">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this travel?')">
                    <i class="bi bi-trash"></i> Delete Travel
                </button>
            </form>
        </div>
    </div>
    <div class="card-footer text-muted">
        <small>
            Created: <%= new Date(travel.createdAt).toLocaleString() %>
            <% if (travel.updatedAt && travel.updatedAt.toString() !== travel.createdAt.toString()) { %>
                | Updated: <%= new Date(travel.updatedAt).toLocaleString() %>
            <% } %>
        </small>
    </div>
</div>

<%- include('../partials/footer') %>

